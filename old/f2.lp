#const n=18.

size(n).
                                                                         
{ d(X,Y) } :- X = 1..n, Y = 1..n, not c(X,Y).
                                                                         
:- d(X,Y), DX = X+1..n, DY = Y+1..n, d(DX,Y), d(X,DY), d(DX,DY). 

:- X=1..n,  { d(X,Y) } 3.                                      
:- Y=1..n,  { d(X,Y) } 3.                                      
:- X=1..n,  6 { d(X,Y) }.                                      
:- Y=1..n,  6 { d(X,Y) }.                                      

%:- not (n*n)/4 { d(X,Y) } (n*n)/4.                                      
#maximize[d(_,_)@2].

k(X,Y,DX,DY) :- X = 1..n, Y = 1..n, DX = X+1..n, DY = Y+1..n, 
          not d(X,Y), not d(DX,Y), not d(X,DY), not d(DX,DY),
          DX-X < 6, DY-Y < 6.

#minimize[k(_,_,_,_)@1].


c(1,3).
c(1,16).
c(1,17).
c(1,18).
c(2,2).
c(2,4).
c(2,10).
c(2,18).
c(3,6).
c(3,9).
c(3,13).
c(3,16).
c(4,3).
c(4,5).
c(4,11).
c(4,12).
c(5,3).
c(5,9).
c(5,10).
c(5,14).
c(6,2).
c(6,3).
c(6,7).
c(6,8).
c(6,13).
c(7,2).
c(7,5).
c(7,15).
c(7,16).
c(8,6).
c(8,8).
c(8,12).
c(8,18).
c(9,4).
c(9,5).
c(9,8).
c(9,9).
c(9,17).
c(10,2).
c(10,6).
c(10,11).
c(10,14).
c(10,17).
c(11,10).
c(11,12).
c(11,13).
c(11,15).
c(11,17).
c(12,7).
c(12,9).
c(12,11).
c(12,15).
c(12,18).
c(13,4).
c(13,7).
c(13,12).
c(13,14).
c(13,16).
c(14,1).
c(14,8).
c(14,10).
c(14,11).
c(14,16).
c(15,1).
c(15,3).
c(15,4).
c(15,6).
c(15,15).
c(16,1).
c(16,2).
c(16,9).
c(16,12).
c(17,1).
c(17,5).
c(17,13).
c(17,14).
c(17,18).
c(18,5).
c(18,6).
c(18,7).
c(18,10).

